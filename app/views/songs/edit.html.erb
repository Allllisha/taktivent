<div class ="background-home">
<div class="center-container">
  <div class="form-container">
    <%= simple_form_for [@event, @song] do |f| %>
      <div class="form-inputs">
      <% unless @song.images.empty? %>
          <%= cl_image_tag @song.images.first.key, :width => "100%", :height => "350px"%>
      <% end %>
        <div class="song-name">
        <%= f.input :name %>
        <%= f.input :composer_name %>
        </div>
        <div class="start_at_event">
          <%= f.input :start_at, html5: true %>
        </div>
        <%= f.input :length_in_minute %>
        <%= f.input :description, :label => "Song description" %>

        <div class="song-img-container" id= "background">
          <%= f.input :images, as: :file, input_html: { multiple: true, id: "eventImageInput" } %>
          <div class="event-image" id="eventImageTarget">
          </div>
        </div>

        <div class="form-actions">
          <%= f.button :submit, class: "btn-outline-secondary" %>
        </div>

      </div>
    </div>
    <% end %>
  </div>
</div>
</div>

<script>
const pictures = document.querySelector('#eventImageInput');
const eventImagesTarget = document.querySelector('#eventImageTarget');
// const background = document.querySelector('#event-background')

pictures.addEventListener('change', (event) => {
//  background.style.display = "none";
  const files = event.target.files;
  const image = files[0]
  // here's the file size
  console.log(image.size);
  const reader = new FileReader();
  reader.onload = function(file) {
    const img = new Image();
    console.log(file);
    img.src = file.target.result;
    eventImagesTarget.appendChild(img);
  }
  reader.readAsDataURL(image);
  console.log(files);
});
</script>
